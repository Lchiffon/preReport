otherCount = sum(vector %in% names(sort(tab[1,], decreasing = T)[1:10]))
otherProb = paste0(round(otherCount / length(vector) * 100,1),"%")
tab = tab[,order(tab[1,], decreasing = T)[1:10]]
tab$others = c(otherCount, otherProb)
output$table = list(
sprintf("%s has over 10 different values.",vecName),
tab
)
}
output$plot = ggplot2::ggplot(data.frame(vector),ggplot2::aes(x=vector)) +
ggplot2::geom_bar(color="white",fill="#1F78B4") +
ggplot2::ggtitle(sprintf("Bar plot of %s",vecName)) +
ggplot2::xlab("Value")
#  output$summary = summary(vector)
output
}
featureReport.character(vec)
print
library(preReport)
featureReport(iris[,4])
featureReport(iris[,5])
library(preReport)
featureReport(iris[,5])
featureReport(iris[,3])
sapply(iris,featureReport)
a = "1585015980
1585016316
1585013768
1585024746
1585011242
1585017482
1585017976
1585026902
1585037065
1585015432
1585013055
1585015695
1585016607
1585011208
1585011700
1585012102
1585012399
1585013515
1585014045
1585014407
1585014845
1585015058
1585015348
1585015667
1585015907
1585016073
1585016407
1585016692
1585010753
1585011386
1585012871
1585012517
1585015985
1585017777
1585018154
1585018505
1585018928
1585014362
1585014790
1585017913
1585026383
1585019799
1585010548
1585015364
1585015738
1585014258
1585018924
1585018755
1585011641
1585011307
1585016880
1585010936
1585017879
1585018101
1585018305
1585013355
1585014443
1585017311
1585016990
1585013279
1585012847
1585021002
1585021708
1585022131
1585022533
1585023414
1585023854
1585024088
1585024423
1585020129
1585022667
1585023201
1585026355
1585028369
1585029226
1585032542
1585015189
1585018718
1585019245
1585021802
1585023296
1585025839
1585013832
1585014178
1585014526
1585014904
1585019458
1585020633
1585023640
1585014299
1585013287
1585014721
1585015488
1585017904
1585019438
1585021929
1585022925
1585026139
1585026571
1585028405
1585030697
1585031067
1585011480
1585016088
1585017450
1585017817
1585018377
1585019011
1585018657
1585019315
1585019544
1585019922
1585020395
1585021351
1585021842
1585015526
1585017038
1585021009
1585021436
1585022608
1585023057
1585023851
1585024420
1585025146
1585026106
1585026516
1585013667
1585013156
1585015755
1585015969
1585017494
1585017711
1585017866
1585017225
1585018121
1603494829
1587634369
"
cancelHotel = function(a){
a = strsplit(a,"\n")
print(unique(a[[1]]))
hotelid = unique(a[[1]])
urls = paste0("http://hotels.ctrip.com/DomesticBook/ShowOrderDetail.aspx?orderid=",
hotelid,"&OperationAction=Cancel&RepeatAction=HotelDomestic_Repeat_Cancel&CancelRefundType=-1")
for(url in urls){
# 强迫系统暂停几秒,以防被加入黑名单
Sys.sleep(runif(1)*10)
browseURL(url)
}
}
cancelHotel(a)
a = "1585014299
1585013287
1585014721
1585015488
1585017904
1585019438
1585021929
1585022925
1585026139
1585026571
1585028405
1585030697
1585031067
1585011480
1585016088
1585017450
1585017817"
cancelHotel(a)
a ="
1585018377
1585019011
1585018657
1585019315
1585019544
1585019922
1585020395
1585021351
1585021842
1585015526
1585017038
1585021009
1585021436
1585022608
1585023057
1585023851
1585024420
1585025146
1585026106
1585026516
1585013667
1585013156
1585015755"
cancelHotel(a)
a = "
1585015969
1585017494
1585017711
1585017866
1585017225
1585018121
1603494829
1587634369"
cancelHotel(a)
a = "1603745930
1603745920
1603743321
1603743315
1603168484
1589061765
1589061756
1589061739
1589061732
1587654861
1587654802
1585871864
1585019730
1585015113
"
cancelHotel = function(a){
a = strsplit(a,"\n")
print(unique(a[[1]]))
hotelid = unique(a[[1]])
urls = paste0("http://hotels.ctrip.com/DomesticBook/ShowOrderDetail.aspx?orderid=",
hotelid,"&OperationAction=Cancel&RepeatAction=HotelDomestic_Repeat_Cancel&CancelRefundType=-1")
for(url in urls){
# 强迫系统暂停几秒,以防被加入黑名单
Sys.sleep(runif(1)*10)
browseURL(url)
}
}
cancelHotel(a)
librart(knitr)
setwd()
setwd
data = testData
naR = naReport(data)
naR
exists(naR$Delete)
missing(naR$Delete)
missing(naR)
is.null(naR$Delete)
is.null(naR$Complete)
?htmltools
??div
p(naR$noNA)
htmltools::p(naR$noNA)
library(preReport)
naR
knitrNa(naR)
library(htmltools)
knitrNa(naR)
library(preReport)
knitrNa(naR)
library(preReport)
knitrNa(naR)
library(preReport)
knitrNa(naR)
?tags
?tag
library(preReport)
knitrNa(naR)
library(preReport)
knitrNa(naR)
library(preReport)
library(preReport)
knitrNa(naR)
library(preReport)
library(preReport)
knitrNa(naR)
library(preReport)
library(preReport)
library(preReport)
library(preReport)
uniqueReport(testData)
knitrUniq = function(uniqR){
if(is.null(uniqR$unique2)){
div1 = taglist(p(strong(output$unique1[[1]]))
)
}else{
div1 = taglist(p(output$unique2[[1]]),
p(output$unique2[[2]]),
pre(class = 'r', code(class = 'r', output$unique2[[3]]),)
)
}
if(is.null(uniqR$unique4)){
div2 = taglist(p(strong(output$unique3[[1]]))
)
}else{
div2 = taglist(p(output$unique4[[1]]),
p(output$unique4[[2]]),
pre(class = 'r', code(class = 'r', output$unique4[[3]]),
code(class = 'r', output$unique4[[4]]))
)
}
doc <-   tagList(div1, div2)
doc
}
library(preReport)
library(preReport)
uniqR = uniqueReport(data)
knitrUniq(uniqR)
library(preReport)
uniqR = uniqueReport(data)
library(preReport)
knitrUniq(uniqR)
knitrUniq()
knitrUniq
??edit
file.edit("R/featureReport.R")
tempdir()
file.create("current/new1.Rmd")
library(slidify)
slidify()
slidify
View(publish_dropbox)
View(parse_deck)
View(pagify)
View(author)
init_repo
View(publish_dropbox)
View(author)
??init_repo
## username: zdzf1@ctrip.com
## code    : VIOLIN123456
## 使用前先在默认浏览器上登录zdzf1@ctrip.com
## 之后复制订单号给a
## 然后点击-----取消
## -------------原因行程改变
## -------------取消
a = "1587628134
1587629190
1587630061
1587644429
1587623434
"
cancelHotel = function(a){
a = strsplit(a,"\n")
print(unique(a[[1]]))
hotelid = unique(a[[1]])
urls = paste0("http://hotels.ctrip.com/DomesticBook/ShowOrderDetail.aspx?orderid=",
hotelid,"&OperationAction=Cancel&RepeatAction=HotelDomestic_Repeat_Cancel&CancelRefundType=-1")
for(url in urls){
# 强迫系统暂停几秒,以防被加入黑名单
Sys.sleep(runif(1)*10)
browseURL(url)
}
}
cancelHotel(a)
library(dplyr)
?like
%in%
?%in%
?`%in%`
featureOutput = c()
featureOutput
dir()
featureLayout = readLines("skeleton/assets/features.Rmd", ...)
featureLayout = readLines("skeleton/assets/features.Rmd")
"%s" %in% featureLayout
featureLayout
grepl("%s", featureLayout)
which(grepl("%s", featureLayout))
library(preReport)
preReport(iris)
preReport(iris)
library(preReport)
library(preReport)
preReport(iris)
getwd()
scaffold = system.file("skeleton", package = "preReport")
scaffold
scaffold = system.file("skeleton", package = "slidify")
scaffold
preReport(iris, scaffold = "E:/git/preReport/skeleton")
library(preReport)
scaffold = system.file("skeleton", package = "preReport")
scaffold
library(preReport)
scaffold = system.file("skeleton", package = "preReport")
scaffold
preReport(iris)
library(preReport)
preReport(iris)
debug(prReport)
debug(preReport)
preReport(iris)
library(preReport)
preReport(iris)
debug(preReport)
preReport(iris)
out
body
featureReport()
featureOutput
library(preReport)
preReport(iris)
preReport(iris)
library(preReport)
??"knit2html"
library(preReport)
preReport(iris)
preReport(iris)
library(preReport)
preReport(iris)
preReport(iris)
library(preReport)
library(preReport)
preReport(iris)
library(preReport)
preReport(iris)
preReport(iris)
library(preReport)
preReport(iris)
preReport(iris)
rmarkdown::render("index.Rmd","html_document")
knit2html("index.Rmd", output="test.html")
browseURL("test.html")
knit2html("index.Rmd","test.html",force_v1=T)
browseURL("test.html")
knit2html
?knit2html
??html_preserve
??preserve
library(preReport)
preReport(iris)
library(preReport)
preReport(iris)
load("data/data.Rdata")
naR = naReport(data)
knitrNa(naR)
render_markdown()
?render_markdown
rmarkdown::render("index.Rmd","html_document")
library(preReport)
preReport(iris)
library(preReport)
## username: zdzf1@ctrip.com
## code    : VIOLIN123456
## 使用前先在默认浏览器上登录zdzf1@ctrip.com
## 之后复制订单号给a
## 然后点击-----取消
## -------------原因行程改变
## -------------取消
a = "1587645907
1587648121
1587621703
1587625187
"
cancelHotel = function(a){
a = strsplit(a,"\n")
print(unique(a[[1]]))
hotelid = unique(a[[1]])
urls = paste0("http://hotels.ctrip.com/DomesticBook/ShowOrderDetail.aspx?orderid=",
hotelid,"&OperationAction=Cancel&RepeatAction=HotelDomestic_Repeat_Cancel&CancelRefundType=-1")
for(url in urls){
# 强迫系统暂停几秒,以防被加入黑名单
Sys.sleep(runif(1)*10)
browseURL(url)
}
}
cancelHotel(a)
## username: zdzf1@ctrip.com
## code    : VIOLIN123456
## 使用前先在默认浏览器上登录zdzf1@ctrip.com
## 之后复制订单号给a
## 然后点击-----取消
## -------------原因行程改变
## -------------取消
a = "1587630739
1587633930
1588685944
1587619954
"
cancelHotel = function(a){
a = strsplit(a,"\n")
print(unique(a[[1]]))
hotelid = unique(a[[1]])
urls = paste0("http://hotels.ctrip.com/DomesticBook/ShowOrderDetail.aspx?orderid=",
hotelid,"&OperationAction=Cancel&RepeatAction=HotelDomestic_Repeat_Cancel&CancelRefundType=-1")
for(url in urls){
# 强迫系统暂停几秒,以防被加入黑名单
Sys.sleep(runif(1)*10)
browseURL(url)
}
}
cancelHotel(a)
